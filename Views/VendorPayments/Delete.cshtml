@using IMS.DAL.PrimaryDBContext
@model BillPayment

@{
    ViewData["Title"] = "Delete Vendor Payment";
}

<div class="card shadow-sm">
    <div class="card-header bg-danger text-white">
        <h2 class="mb-0" style="text-align:center">Delete Vendor Payment</h2>
    </div>
    <div class="card-body">
        <h3 class="text-danger">Are you sure you want to delete this payment?</h3>
        <div class="alert alert-warning">
            <i class="fa-solid fa-exclamation-triangle me-2"></i>
            This action cannot be undone. If this payment was made via Online method, the transaction will be reversed.
        </div>

        <dl class="row mt-4">
            <dt class="col-sm-4">
                <i class="fa-solid fa-hashtag me-1"></i>Payment ID:
            </dt>
            <dd class="col-sm-8">
                <strong>@Model.PaymentId</strong>
            </dd>

            <dt class="col-sm-4">
                <i class="fa-solid fa-dollar-sign me-1"></i>Payment Amount:
            </dt>
            <dd class="col-sm-8">
                <strong class="text-success">$@Model.PaymentAmount.ToString("N2")</strong>
            </dd>

            <dt class="col-sm-4">
                <i class="fa-solid fa-file-invoice me-1"></i>Bill ID:
            </dt>
            <dd class="col-sm-8">
                @Model.BillId
            </dd>

            <dt class="col-sm-4">
                <i class="fa-solid fa-calendar me-1"></i>Payment Date:
            </dt>
            <dd class="col-sm-8">
                @Model.PaymentDate.ToString("MM/dd/yyyy h:mm tt")
            </dd>

            <dt class="col-sm-4">
                <i class="fa-solid fa-credit-card me-1"></i>Payment Method:
            </dt>
            <dd class="col-sm-8">
                @if (Model.PaymentMethod == "Cash")
                {
                    <span class="badge bg-success">Cash</span>
                }
                else if (Model.PaymentMethod == "Online")
                {
                    <span class="badge bg-primary">Online</span>
                }
                else
                {
                    <span class="badge bg-secondary">@Model.PaymentMethod</span>
                }
            </dd>

            @if (!string.IsNullOrEmpty(Model.Description))
            {
                <dt class="col-sm-4">
                    <i class="fa-solid fa-align-left me-1"></i>Description:
                </dt>
                <dd class="col-sm-8">
                    @Model.Description
                </dd>
            }
        </dl>

        <form asp-action="Delete" asp-route-id="@Model.PaymentId" method="post">
            @Html.AntiForgeryToken()
            <div class="d-flex justify-content-between mt-4">
                <a asp-action="Index" class="btn btn-secondary">
                    <i class="fa-solid fa-arrow-left me-1"></i>Back to List
                </a>
                <button type="submit" class="btn btn-danger">
                    <i class="fa-solid fa-trash me-1"></i>Delete Payment
                </button>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Add loading state to delete button
            $('form').on('submit', function() {
                const submitBtn = $(this).find('button[type="submit"]');
                submitBtn.prop('disabled', true);
                submitBtn.html('<i class="fa-solid fa-spinner fa-spin me-1"></i>Deleting...');
            });
        });
    </script>
}
